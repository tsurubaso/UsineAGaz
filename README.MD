
---

# Bouyaâ€‘Bouya Blockchain â€” Miniâ€‘rÃ©seau distribuÃ© en Node.js

Bouyaâ€‘Bouya est une blockchain pÃ©dagogique minimaliste, distribuÃ©e sur plusieurs nÅ“uds TCP, avec signatures ECDSA secp256k1, propagation rÃ©seau, mempool, forge de blocs et dashboard web intÃ©grÃ©.  
Chaque nÅ“ud fonctionne dans un conteneur ou en mode IP, et synchronise sa copie locale de la chaÃ®ne.

---

## ğŸš€ FonctionnalitÃ©s principales

- RÃ©seau pairâ€‘Ã â€‘pair via TCP (port 5000)
- Blockchain complÃ¨te avec :
  - Genesis signÃ©
  - ChaÃ®nage cryptographique SHAâ€‘256
  - Validation stricte des blocs
- Transactions signÃ©es (ECDSA secp256k1)
- Mempool distribuÃ© avec antiâ€‘doublons
- Forge automatique de blocs (master uniquement)
- Propagation rÃ©seau :
  - `GET_CHAIN`
  - `FULL_CHAIN`
  - `NEW_TX`
  - `NEW_BLOCK`
- Ledger local recalculÃ© Ã  partir de la chaÃ®ne
- SystÃ¨me de mint contrÃ´lÃ© (master seulement)
- Dashboard web par nÅ“ud (port 300X)
- Synchronisation automatique au dÃ©marrage

---

## ğŸ§± Architecture du rÃ©seau

Le rÃ©seau est composÃ© de plusieurs nÅ“uds :

- `node1` : **master**
  - Forge les blocs
  - Peut crÃ©er de la monnaie (mint)
- `node2`, `node3`, â€¦ : **followers**
  - ReÃ§oivent les blocs
  - Maintiennent leur mempool
  - Valident les transactions

Chaque nÅ“ud possÃ¨de :

- une clÃ© privÃ©e
- une clÃ© publique
- un mempool local
- une copie locale de la blockchain
- un ledger dÃ©rivÃ© de la chaÃ®ne

---

## ğŸ” Cryptographie

### Signatures
- Courbe : **secp256k1** (via `@noble/curves`)
- Chaque transaction est signÃ©e avec la clÃ© privÃ©e de lâ€™Ã©metteur
- Les blocs sont signÃ©s uniquement par le master

### Hashs
- SHAâ€‘256 pour :
  - les transactions
  - les blocs
  - les identifiants de transaction

---

## ğŸ”„ Synchronisation rÃ©seau

Au dÃ©marrage :

1. Le nÅ“ud contacte tous ses pairs via `GET_CHAIN`
2. Le peer rÃ©pond avec `FULL_CHAIN`
3. Le nÅ“ud valide la chaÃ®ne reÃ§ue :
   - Genesis strict
   - Hashs
   - Signatures
4. La chaÃ®ne la plus longue est adoptÃ©e
5. Le master exÃ©cute le **bootstrap monÃ©taire** (mint + distribution)

Pendant la vie du rÃ©seau :

- Les transactions se propagent via `NEW_TX`
- Les blocs se propagent via `NEW_BLOCK`
- Le mempool est nettoyÃ© automatiquement lorsque les transactions sont confirmÃ©es

---

## â›ï¸ Forge de blocs (master uniquement)

Toutes les 20 secondes :

1. Le master prend **tout le mempool**
2. CrÃ©e un bloc :
   - index
   - previousHash
   - timestamp
   - transactions
3. Calcule le hash structurel
4. Signe le bloc
5. Lâ€™ajoute Ã  sa chaÃ®ne
6. Applique les transactions au ledger
7. Diffuse le bloc aux autres nÅ“uds

Les followers :

- VÃ©rifient le bloc
- Nettoient leur mempool
- Appliquent les transactions

---

## ğŸ’¸ Transactions

Format :

```json
{
  "from": "<publicKey>",
  "to": "<publicKey>",
  "amount": 42,
  "timestamp": 1700000000000,
  "signature": "<hex>",
  "id": "<sha256>"
}
```

Validation :

- Signature ECDSA valide
- Solde suffisant (sauf mint)
- Antiâ€‘doublon via `id`

Propagation automatique Ã  tous les peers.

---

## ğŸª™ Mint & Bootstrap monÃ©taire

Uniquement pour `node1`.

Au premier dÃ©marrage :

1. Mint de 1000 Bouya pour le master
2. Distribution automatique :
   - 100 Bouya â†’ node2
   - 100 Bouya â†’ node3
3. Les transactions sont ajoutÃ©es au mempool
4. Elles seront confirmÃ©es dans le premier bloc forgÃ©

---

## ğŸŒ Dashboard Web

Chaque nÅ“ud expose une interface web :

```
http://localhost:3001  â†’ node1
http://localhost:3002  â†’ node2
http://localhost:3003  â†’ node3
```

Affiche :

- Nombre de blocs
- Taille du mempool
- Soldes
- Logs rÃ©cents
- Formulaire pour crÃ©er une transaction

---

## âš™ï¸ Configuration

### Variables dâ€™environnement

```
NODE_ID=node1
MASTER_ID=node1
NETWORK_MODE=docker | ip

NODE1_PRIVATE_KEY=...
NODE1_PUBLIC_KEY=...
NODE2_PRIVATE_KEY=...
NODE2_PUBLIC_KEY=...
NODE3_PRIVATE_KEY=...
NODE3_PUBLIC_KEY=...
```

### peers.json

```json
{
  "peersDocker": ["node1", "node2", "node3"],
  "peersIP": ["192.168.0.10:5000", "192.168.0.11:5000"]
}
```

---

## â–¶ï¸ Lancement

### Mode Docker
Chaque conteneur dÃ©finit son `NODE_ID`.

### Mode local
Lancer plusieurs instances :

```
NODE_ID=node1 node app.js
NODE_ID=node2 node app.js
NODE_ID=node3 node app.js
```

---

## ğŸ“ Structure du projet

```
.
â”œâ”€â”€ app.js
â”œâ”€â”€ peers.json
â”œâ”€â”€ .env
â””â”€â”€ README.md
```

---

## ğŸ§ª Tests manuels

- CrÃ©er une transaction via le dashboard
- VÃ©rifier sa propagation dans les logs
- Attendre la forge du bloc
- VÃ©rifier la mise Ã  jour des soldes
- VÃ©rifier la suppression du mempool

---

## ğŸ“Œ Objectifs pÃ©dagogiques

Ce projet illustre :

- la logique dâ€™une blockchain distribuÃ©e
- la propagation P2P
- la validation cryptographique
- la gestion dâ€™un mempool
- la forge de blocs
- la synchronisation de chaÃ®nes
- la gestion dâ€™un ledger dÃ©rivÃ©

---